# SET μ„ νƒ/μµμ ν™” κ·μΉ™ μΌλ°ν™” μ™„λ£ λ³΄κ³ μ„

## π“‹ μ‘μ—… κ°μ”

SET1/SET2/SET3μ μ—­ν•  κ°•μ λ¥Ό μ κ±°ν•κ³ , λ¨λ‘ λ™μΌν• "ν•„μ μ„ΈνΈ κ·Έλ£Ή(OR κ·Έλ£Ή)"μΌλ΅ μ²λ¦¬ν•λ” μΌλ°ν™”λ λ΅μ§μ„ κµ¬ν„ν–μµλ‹λ‹¤.

## β… μ™„λ£λ μ‘μ—…

### 0) μ„ΈνΈ λ©”νƒ€λ°μ΄ν„°

**νμΌ**: `src/sw_core/set_meta.py`

- λ¨λ“  λ£¬ μ„ΈνΈμ μ™„μ„±μ— ν•„μ”ν• κ°μ μ •μ (2-set λλ” 4-set)
- `get_set_requirement(set_name)`: μ„ΈνΈ μ™„μ„±μ— ν•„μ”ν• λ£¬ κ°μ λ°ν™
- `is_4set()`, `is_2set()`: μ„ΈνΈ νƒ€μ… ν™•μΈ

### 1) UI μλ―Έ (κ°•μ  μ—­ν•  μ—†μ)

**νμΌ**: `ui/app_swop.py` (SETS μ„Ήμ…)

- SET1, SET2, SET3λ” λ¨λ‘ λ™μΌν• μλ―Έμ "ν•„μ μ„ΈνΈ κ·Έλ£Ή(OR κ·Έλ£Ή)"
- κ° κ·Έλ£Ήμ€ λ©€ν‹°μ…€λ ‰νΈλ΅ μ—¬λ¬ μ„ΈνΈλ¥Ό λ‹΄μ„ μ μμ
- κ·Έλ£Ήμ΄ λΉ„μ–΄μμΌλ©΄ ν•΄λ‹Ή κ·Έλ£Ήμ€ μ”κµ¬μ΅°κ±΄ μ—†μ
- κ·Έλ£Ήμ΄ μ±„μ›μ Έ μμΌλ©΄:
  - κ·Έλ£Ή λ‚΄λ” OR(νƒ1 μ™„μ„±)
  - κ·Έλ£Ή κ°„μ€ AND(κ° κ·Έλ£Ήμ—μ„ 1κ°μ”© μ™„μ„±)

### 2) "μ™„μ„±"μ μλ―Έ

**κµ¬ν„ μ„μΉ**: `src/sw_core/set_meta.py` + `ui/app_swop.py`

- 4-set: λΉλ“μ— 4κ° μ΄μƒ ν¬ν•¨λμ–΄μ•Ό μ™„μ„±
- 2-set: λΉλ“μ— 2κ° μ΄μƒ ν¬ν•¨λμ–΄μ•Ό μ™„μ„±
- 6λ£¬ κΈ°λ° λ¬Όλ¦¬ μ μ•½:
  - 4-setμ€ μµλ€ 1κ°λ§ μ™„μ„± κ°€λ¥ (4+4 λ¶κ°€)
  - κ°€λ¥ν• μ™„μ„± μ΅°ν•©: 4+2, 2+2+2, 4+(μ”μ—¬ 2 μμ ), 2+(μ”μ—¬ 4 μμ )

### 3) μ΅°ν•© μƒμ„± (ν•µμ‹¬)

**κµ¬ν„ μ„μΉ**: `src/sw_core/set_meta.py` - `generate_set_combinations()`

1. **μ΅°ν•© μƒμ„± λ΅μ§**
   - λΉ„μ–΄μμ§€ μ•μ€ κ·Έλ£Ήλ“¤μ λ©λ΅μ„ G = [SETi | SETi not empty]
   - κ°€λ¥ν• ν›„λ³΄ μ΅°ν•©μ€ "κ° κ·Έλ£Ήμ—μ„ 1κ°μ”© μ„ΈνΈλ¥Ό μ„ νƒ"ν• νν”λ΅ μƒμ„±
   - μ: SET1={A,B}, SET2={C} β†’ (A,C), (B,C)

2. **μ ν¨μ„± κ²€μ¦**
   - `is_valid_combination()`: μ΅°ν•©μ΄ μ ν¨ν•μ§€ κ²€μ¦
   - required_count <= 6
   - 4-set νƒ€μ… μ„ΈνΈκ°€ 2κ° μ΄μƒμ΄λ©΄ λ¬΄ν¨ (4+4 λ¶κ°€)
   - μ¤‘λ³µ μ„ΈνΈλ” ν—μ© (ν•λ‚λ΅ ν•©μ³μ„ κ³„μ‚°)

3. **μ—”μ§„ μ—°λ™**
   - κ° μ ν¨ν• μ΅°ν•©μ— λ€ν•΄ μµμ ν™” μ‹¤ν–‰
   - κ²°κ³Όλ¥Ό ν•©μ³μ„ objective κΈ°μ¤€ μ „μ—­ Top N λ°ν™

### 4) λ‚¨λ” μ¬λ΅― μ²λ¦¬ κ·μΉ™

**κµ¬ν„ μ„μΉ**: `ui/app_swop.py` (Strict λ¨λ“ ν† κΈ€)

1. **κ·Έλ£Ήμ΄ 1κ°λ§ μλ” κ²½μ°**
   - λ‚¨λ” μ¬λ΅―μ€ "μμ " (μ–΄λ–¤ μ„ΈνΈλ“  ν—μ©)
   - exclude_setsκ°€ μμΌλ©΄ μ μ™Έ μ„ΈνΈλ” κΈμ§€

2. **κ·Έλ£Ήμ΄ 2κ° μ΄μƒ μλ” κ²½μ°**
   - κΈ°λ³Έκ°’: "Strict (μ„ νƒλ μ„ΈνΈλ§ μ‚¬μ©)" ON
   - Strict ON: μ„ νƒλ μ„ΈνΈλ“¤λ΅λ§ κµ¬μ„±
   - Strict OFF: λ‚¨λ” μ¬λ΅―μ€ μμ  (λ‹¨ excludeλ” μ μ©)

### 5) Exclude sets

**κµ¬ν„ μ„μΉ**: `ui/app_swop.py` (EXCLUDE μ„Ήμ…)

- exclude_setsλ” ν›„λ³΄ λ£¬ μΈλ²¤ν† λ¦¬μ—μ„ ν•΄λ‹Ή μ„ΈνΈ λ£¬μ„ μ•„μ μ κ±°
- excludeλ μ„ΈνΈκ°€ μ–΄λ–¤ κ·Έλ£Ήμ— μ„ νƒλμ–΄ μμΌλ©΄ UIμ—μ„ μ κ±°λ¨

### 6) μ—”μ§„ μ—°λ™ λ°©μ‹

**κµ¬ν„ μ„μΉ**: `ui/app_swop.py` (OPTIMIZE λ²„νΌ)

1. **μ΅°ν•©λ³„ μµμ ν™” μ‹¤ν–‰**
   - κ° μ΅°ν•©μ— λ€ν•΄ `set_constraints` μƒμ„±
   - Strict λ¨λ“μ— λ”°λΌ λ£¬ ν•„ν„°λ§
   - κ° μ΅°ν•©μ— λ€ν•΄ μµμ ν™” μ‹¤ν–‰
   - κ²°κ³Όλ¥Ό ν•©μ³μ„ μ •λ ¬ ν›„ Top N λ°ν™

2. **ν›„μ²λ¦¬**
   - No broken sets: μ„ΈνΈ μ™„μ„± μ—¬λ¶€ κ²€μ¦
   - MIN/MAX ν•„ν„°: κ²°κ³Ό ν•„ν„°λ§

### 7) UI μ”κµ¬μ‚¬ν•­

**κµ¬ν„ μ„μΉ**: `ui/app_swop.py` (SETS μ„Ήμ…)

- β… SET1/SET2/SET3λ” λ©€ν‹°μ…€λ ‰νΈ(chips)
- β… μ„ νƒλ κ·Έλ£Ήλ“¤λ΅λ¶€ν„° μƒμ„±λ "κ²€μƒ‰ μΌ€μ΄μ¤ μ"μ™€ μμ‹ ν‘μ‹
- β… Strict/Allow other sets ν† κΈ€ μ κ³µ
- β… ν„μ¬ μ–΄λ–¤ μ •μ±…μ΄ μ μ©λλ”μ§€ λ…ν™•ν λΌλ²¨λ§

## π¨ UI λ μ΄μ•„μ›ƒ

### SETS ν¨λ„ κµ¬μ΅°
```
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚ SETS                            β”‚
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¤
β”‚ SET 1  [λ©€ν‹°μ…€λ ‰νΈ]              β”‚
β”‚   μ„ νƒ: Rage Violent            β”‚
β”‚ SET 2  [λ©€ν‹°μ…€λ ‰νΈ]              β”‚
β”‚   μ„ νƒ: Blade                   β”‚
β”‚ SET 3  [λ©€ν‹°μ…€λ ‰νΈ]              β”‚
β”‚   (λΉ„μ–΄μμ)                     β”‚
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¤
β”‚ κ²€μƒ‰ μΌ€μ΄μ¤: 2κ°                 β”‚
β”‚ 1. Rage + Blade (6λ£¬)           β”‚
β”‚ 2. Violent + Blade (6λ£¬)         β”‚
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¤
β”‚ EXCLUDE                          β”‚
β”‚ [λ©€ν‹°μ…€λ ‰νΈ]                     β”‚
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¤
β”‚ β No broken sets                β”‚
β”‚ β‘ Strict (μ„ νƒλ μ„ΈνΈλ§ μ‚¬μ©)    β”‚
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¤
β”‚ [Clear λ²„νΌ]                     β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
```

## π”§ κΈ°μ μ  μ„Έλ¶€μ‚¬ν•­

### μ΅°ν•© μƒμ„± μμ‹

```python
# SET1={Rage, Violent}, SET2={Blade}, SET3={}
set_groups = [["Rage", "Violent"], ["Blade"], []]
combinations = generate_set_combinations(set_groups)
# κ²°κ³Ό: [("Rage", "Blade"), ("Violent", "Blade")]

# κ° μ΅°ν•©μ— λ€ν•΄:
# - set_constraints = {"Rage": 4, "Blade": 2} λλ” {"Violent": 4, "Blade": 2}
# - μµμ ν™” μ‹¤ν–‰
# - κ²°κ³Ό ν•©μΉκΈ°
```

### μ ν¨μ„± κ²€μ¦ μμ‹

```python
# μ ν¨ν• μ΅°ν•©
("Rage", "Blade")  # 4+2=6, OK
("Violent", "Will")  # 4+2=6, OK
("Blade", "Nemesis", "Shield")  # 2+2+2=6, OK

# λ¬΄ν¨ν• μ΅°ν•©
("Rage", "Violent")  # 4+4=8 > 6, λ¬΄ν¨
("Fatal", "Rage")  # 4+4=8 > 6, λ¬΄ν¨
```

### Strict λ¨λ“ λ™μ‘

```python
# Strict ON
combo = ("Rage", "Blade")
allowed_set_ids = [Rage_ID, Blade_ID]
filtered_runes = [r for r in runes if r.set_id in allowed_set_ids or r.intangible]

# Strict OFF
filtered_runes = runes  # λ¨λ“  μ„ΈνΈ ν—μ© (λ‹¨ excludeλ” μ μ©)
```

## β… μ™„λ£ μ΅°κ±΄ μ²΄ν¬

- [x] SET1/SET2/SET3μ— μ–΄λ–¤ μ„ΈνΈλ¥Ό λ„£μ–΄λ„ λ™μΌν• λ΅μ§μΌλ΅ λ™μ‘ (μ—­ν•  κ°•μ  μ—†μ)
- [x] κ·Έλ£Ήμ΄ 1κ°λ§ μ±„μ›μ§„ κ²½μ°: ν•΄λ‹Ή κ·Έλ£Ήμ—μ„ κ³ λ¥Έ μ„ΈνΈ 1κ° μ™„μ„±λ§ λ³΄μ¥ν•κ³  λ‚λ¨Έμ§€λ” μμ 
- [x] κ·Έλ£Ήμ΄ 2κ° μ΄μƒ μ±„μ›μ§„ κ²½μ°: κ° κ·Έλ£Ήμ—μ„ 1κ°μ”© μ™„μ„±λλ” μ΅°ν•©λ“¤ μ¤‘ μµκ³  κ²°κ³Όλ¥Ό μ°Ύμ
- [x] 4+4 κ°™μ€ λ¶κ°€λ¥ μ΅°ν•©μ€ μ λ€ μƒμ„±λμ§€ μ•μ
- [x] Strict μ •μ±… ONμ΄λ©΄ μ„ νƒλ μ„ΈνΈ μ™Έ λ£¬μ΄ μ„μΈ κ²°κ³Όλ” λ‚μ¤μ§€ μ•μ
- [x] μ΅°ν•© μƒμ„± λ° κ²€μƒ‰ μΌ€μ΄μ¤ μ ν‘μ‹
- [x] κ° μ΅°ν•©μ— λ€ν•΄ μµμ ν™” μ‹¤ν–‰ λ° κ²°κ³Ό ν•©μΉκΈ°

## π€ μ‚¬μ© μμ‹

### μμ‹ 1: λ‹¨μΌ κ·Έλ£Ή
- SET1: {Rage}
- SET2: (λΉ„μ–΄μμ)
- SET3: (λΉ„μ–΄μμ)
- κ²°κ³Ό: Rage 4-set μ™„μ„±, λ‚λ¨Έμ§€ 2λ£¬μ€ μμ 

### μμ‹ 2: λ‹¤μ¤‘ κ·Έλ£Ή (OR + AND)
- SET1: {Rage, Violent}
- SET2: {Blade}
- SET3: (λΉ„μ–΄μμ)
- μ΅°ν•©: (Rage, Blade), (Violent, Blade)
- κ²°κ³Ό: λ‘ μ΅°ν•© μ¤‘ μµκ³  κ²°κ³Ό λ°ν™

### μμ‹ 3: Strict λ¨λ“
- SET1: {Violent}
- SET2: {Will}
- Strict: ON
- κ²°κ³Ό: Violent+Will μ΅°ν•©λ§, λ‹¤λ¥Έ μ„ΈνΈ μ‚¬μ© μ• ν•¨

### μμ‹ 4: Strict OFF
- SET1: {Violent}
- SET2: {Will}
- Strict: OFF
- κ²°κ³Ό: Violent+Will μ™„μ„±, λ‚¨λ” 2λ£¬μ€ μμ  (λ‹¨ excludeλ” μ μ©)

## β οΈ ν„μ¬ μ ν•μ‚¬ν•­ λ° ν–¥ν›„ κ°μ„ 

### μ„±λ¥ μµμ ν™”
- μ΅°ν•©μ΄ λ§μ„ λ• (μ: 10κ° μ΄μƒ) μ„±λ¥ μ΄μ κ°€λ¥
- ν–¥ν›„: "Search depth / max combinations" μµμ… μ κ³µ
- λλ” "Presets(λΉ λ¥Έ ν”„λ¦¬μ…‹)" μ κ³µ

### μ΅°ν•© μƒμ„± μµμ ν™”
- ν„μ¬λ” λ¨λ“  μ΅°ν•©μ„ μƒμ„±ν•μ§€λ§, μΌλ¶€ μ΅°ν•©μ€ μ‚¬μ „μ— μ κ±° κ°€λ¥
- μ: 4-setμ΄ 2κ° μ΄μƒμΈ μ΅°ν•©μ€ μƒμ„± μ „μ— μ κ±°

## π“ μ°Έκ³ μ‚¬ν•­

### μ„ΈνΈ λ©”νƒ€λ°μ΄ν„°
- 4-set: Swift, Rage, Fatal, Despair, Vampire, Violent, Destroy
- 2-set: λ‚λ¨Έμ§€ λ¨λ“  μ„ΈνΈ

### μ΅°ν•© μƒμ„± κ·μΉ™
- κ·Έλ£Ή λ‚΄: OR (νƒ1)
- κ·Έλ£Ή κ°„: AND (κ° κ·Έλ£Ήμ—μ„ 1κ°μ”©)
- μ ν¨μ„±: required_count <= 6, 4-set μµλ€ 1κ°

### μ—”μ§„ μ—°λ™
- κ° μ΅°ν•©μ— λ€ν•΄ `set_constraints` μƒμ„±
- Strict λ¨λ“μ— λ”°λΌ λ£¬ ν•„ν„°λ§
- κ²°κ³Ό ν•©μΉκΈ° λ° Top N λ°ν™


